<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WarriorDining - 리뷰 수정 페이지</title>
    <link rel="stylesheet" href="./css/default.css">
    <link rel="stylesheet" href="./css/newReview.css">
</head>
<body>
<header>
    <div class="container">
        <div class="header-content">
            <a href="#" class="logo">WarriorDining</a>
            <div class="auth-buttons">
                <a href="#">로그인</a>
                <a href="#">회원 가입</a>
            </div>
        </div>
    </div>
</header>

<div class="nav-bar">
    <div class="container">
        <ul>
            <li><a href="/topreservation">예약 TOP</a></li>
            <li><a href="#">이달의 맛집</a></li>
            <li><a href="/reservation">예약</a></li>
            <li><a href="#">문의</a></li>
            <li class="search-bar">
                <input type="text" placeholder="지역 또는 레스토랑 검색">
                <button>검색</button>
            </li>
        </ul>
    </div>
</div>

<main class="container">
    <!-- 리뷰 수정 섹션 -->
    <div class="review-form-container">
        <h3>리뷰 수정하기</h3>
        <form action="/update-review" method="post">
            <input type="hidden" name="reviewId" value="12345"> <!-- 리뷰 ID를 숨겨진 필드로 추가 -->

            <div class="form-group">
                <label>별점:</label>
                <div class="star-rating">
                    <input type="radio" id="star1" name="rating" value="1">
                    <label for="star1" data-value="1">&#9733;</label>
                    <input type="radio" id="star2" name="rating" value="2">
                    <label for="star2" data-value="2">&#9733;</label>
                    <input type="radio" id="star3" name="rating" value="3">
                    <label for="star3" data-value="3">&#9733;</label>
                    <input type="radio" id="star4" name="rating" value="4">
                    <label for="star4" data-value="4">&#9733;</label>
                    <input type="radio" id="star5" name="rating" value="5">
                    <label for="star5" data-value="5">&#9733;</label>
                </div>
            </div>

            <div class="form-group">
                <label for="review">리뷰 내용:</label>
                <textarea id="review" name="review" rows="10" placeholder="리뷰를 작성하세요" required></textarea>
            </div>

            <!-- 버튼 그룹을 flex 컨테이너로 변경 -->
            <div class="form-group buttons">
                <button type="submit">수정</button>
                <button type="button">삭제</button>
            </div>
        </form>
    </div>
</main>

<footer>
    <p>&copy; 2024 WarriorDining. All rights reserved.</p>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const labels = document.querySelectorAll('.star-rating label');
        let selectedValue = null;

        // 현재 별점 값을 불러와서 선택 상태로 설정
        const currentRating = 3; // 예시로 현재 별점 3을 사용

        labels.forEach(label => {
            const value = label.dataset.value;
            if (value <= currentRating) {
                label.classList.add('selected');
                document.getElementById(`star${value}`).checked = true;
                selectedValue = currentRating;
            }
        });

        labels.forEach(label => {
            label.addEventListener('click', function() {
                const value = this.dataset.value;

                if (selectedValue === value) {
                    // 이미 선택된 별점이 클릭된 경우 선택 해제
                    selectedValue = null;
                    clearSelection();
                } else {
                    // 새로운 별점 선택
                    selectedValue = value;
                    updateSelection();
                }
            });
        });

        function clearSelection() {
            labels.forEach(label => {
                label.classList.remove('selected');
            });
        }

        function updateSelection() {
            labels.forEach(label => {
                if (label.dataset.value <= selectedValue) {
                    label.classList.add('selected');
                } else {
                    label.classList.remove('selected');
                }
            });
        }
    });
</script>

</body>
</html>
